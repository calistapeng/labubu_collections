# iOS真机部署指南

## 部署准备

1. **确保您的Mac已安装最新版本的Xcode**
   - 可以从Mac App Store下载Xcode

2. **确保您的iPhone已通过数据线连接到Mac**
   - 首次连接时，iPhone会询问是否信任此电脑，请选择"信任"

3. **确保您拥有有效的Apple开发者账号**
   - 可以使用您的Apple ID免费签署应用程序（有7天的使用限制）
   - 付费开发者账号（每年99美元）可以移除这一限制

## 部署步骤

### 使用提供的脚本部署

我们已经创建了一个名为`ios_deploy.sh`的脚本来自动化部署过程：

1. 打开终端，并进入项目目录
2. 运行`./ios_deploy.sh`
3. 脚本完成后，会自动打开Xcode项目

### Xcode配置

在Xcode中：

1. 在左侧导航面板中选择"Runner"项目
2. 选择"Signing & Capabilities"选项卡
3. 选中"Automatically manage signing"选项
4. 在"Team"下拉菜单中选择您的开发者账号
5. 可能需要修改"Bundle Identifier"为唯一值（默认是com.example.nft）
   - 例如：com.yourname.nft
6. 在顶部设备选择器中选择您已连接的iPhone设备
7. 点击运行按钮（▶️）部署到设备

## 常见问题与解决方案

### 1. "无法验证APP"或"未能取得开发人员信任评分"

**解决方法**：
- 在iPhone上，打开设置 > 通用 > VPN与设备管理（或设备管理）
- 找到开发者配置文件（通常是您的Apple ID或开发者账号名称）
- 点击并选择"信任[开发者名称]"

### 2. "无法安装应用程序"

**解决方法**：
- 确保您的设备已解锁
- 检查设备上是否有足够的存储空间
- 尝试重启iPhone和Mac
- 确认您的Apple ID未被限制（如有父母控制等）

### 3. 3D模型相关问题

如果3D模型无法正常显示：

- 确保assets目录中已包含GLB模型文件
- 检查Info.plist是否包含正确的相机权限
- 验证model_viewer_plus库已正确安装
- 在没有AR功能的设备上，禁用AR选项

### 4. 应用崩溃

如果应用启动后立即崩溃：

- 在Xcode中查看崩溃日志（Window > Devices and Simulators）
- 检查是否有与3D模型渲染相关的错误
- 确保您的iOS设备版本支持ARKit功能（iOS 11及更高版本）

## 注意事项

1. **免费开发者账号限制**：
   - 应用将在7天后过期
   - 每7天需要重新部署
   - 受限制的设备数量（通常为3-5台设备）

2. **AR功能要求**：
   - iOS 11.0或更高版本
   - iPhone 6s或更新机型
   - 良好的光照条件有助于AR体验

3. **3D模型性能**：
   - 大型3D模型可能在老旧设备上性能较差
   - 如果出现卡顿，考虑优化GLB模型大小和复杂度

## 疑难解答

如果您在部署过程中遇到其他问题，可以尝试：

1. 在终端运行`flutter doctor`检查Flutter环境是否完整
2. 确认Xcode命令行工具已安装：`xcode-select --install`
3. 确保您的iOS设备已启用开发者模式：设置 > 隐私与安全 > 开发者模式
4. 检查您的Apple ID是否已加入Apple Developer Program（对于付费开发者账号） 